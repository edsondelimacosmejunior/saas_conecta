# Regras de Desenvolvimento - SaaS Conecta

## Arquitetura do Projeto

Este Ã© um projeto Django (Backend) + Nuxt 3 (Frontend) com padrÃµes especÃ­ficos que DEVEM ser seguidos.

---

## ğŸ¨ FRONTEND (Nuxt 3)

### Design System - OBRIGATÃ“RIO

1. **SEMPRE reutilize componentes existentes** em `frontend/app/components/`
2. **NUNCA crie elementos UI do zero** - use o Design System
3. **Componentes disponÃ­veis**:
   - `UiButton` - BotÃµes (tipos: primary, secondary, tertiary)
   - `UiInput` - Inputs de formulÃ¡rio
   - `UiEmpty` - Estados vazios
   - Quasar components - q-item, q-badge, q-scroll-area, etc.

4. **Criar novo componente?**
   - Crie em `frontend/app/components/` com nomenclatura PascalCase
   - Torne-o REUTILIZÃVEL (use props, nÃ£o hardcode valores)
   - Adicione ao Storybook (se houver)
   - Documente props e uso

5. **Estrutura de componentes**:
   ```
   components/
   â”œâ”€â”€ Ui/         # Componentes base do Design System
   â”œâ”€â”€ Vaga/       # Componentes especÃ­ficos de Vaga
   â””â”€â”€ [Feature]/  # Componentes agrupados por feature
   ```

### PadrÃµes de CÃ³digo Frontend

- **Composables**: Use composables existentes em `frontend/app/composables/`
- **Services**: Crie services em `frontend/app/services/` para chamadas API
- **Utils**: FunÃ§Ãµes utilitÃ¡rias em `frontend/app/utils/`
- **Stores**: Pinia stores em `frontend/app/stores/`
- **PÃ¡ginas**: `frontend/app/pages/` seguindo convenÃ§Ã£o de roteamento Nuxt

### Estilo e Classes

- **TailwindCSS**: Use classes utilitÃ¡rias
- **Quasar**: Use sistema de cores e componentes do Quasar
- **Responsividade**: Use modifiers `max-lg:`, `max-sm:`, etc.

---

## ğŸ”§ BACKEND (Django)

### Estrutura de Apps Django

Cada app Django segue a MESMA estrutura de pastas:

```
app_name/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ apps.py
â”œâ”€â”€ urls.py
â”œâ”€â”€ admin/          # SEMPRE em subpasta
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ [model]_admin.py
â”œâ”€â”€ models/         # SEMPRE em subpasta
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ [model].py
â”œâ”€â”€ serializers/    # SEMPRE em subpasta
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ [model]_serializers.py
â”œâ”€â”€ viewsets/       # SEMPRE em subpasta
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ [model]_viewsets.py
â”œâ”€â”€ forms/          # Opcional
â”œâ”€â”€ managers/       # Opcional
â”œâ”€â”€ signals/        # Opcional
â”œâ”€â”€ migrations/
â”œâ”€â”€ static/
â”œâ”€â”€ templates/
â””â”€â”€ tests/
```

### PadrÃµes de Models

1. **Sempre herde de `models.Model`** (nÃ£o use Meta abstracts desnecessÃ¡rios)
2. **Use verbose_name** em todos os campos
3. **Campos comuns**:
   ```python
   data_criacao = models.DateTimeField(auto_now_add=True)
   data_atualizacao = models.DateTimeField(auto_now=True)
   usuario_criacao = models.ForeignKey(User, related_name='+', ...)
   usuario_atualizacao = models.ForeignKey(User, related_name='+', ...)
   ```
4. **Slug fields**: Use `unique=True` quando for identificador
5. **EditorJS fields**: Use `EditorJsField` de `django_editorjs`

### PadrÃµes de Admin

1. **Arquivo separado**: `admin/[model]_admin.py`
2. **Classe base**: Herde de `ModelAdmin` ou custom base
3. **Sempre configure**:
   - `list_display`
   - `list_filter`
   - `search_fields`
   - `fieldsets` (para organizaÃ§Ã£o no form)
4. **Registre no `__init__.py`** da pasta admin

### PadrÃµes de Serializers

1. **Arquivo separado**: `serializers/[model]_serializers.py`
2. **HeranÃ§a**: `serializers.ModelSerializer`
3. **Meta class**: Sempre defina `model` e `fields`
4. **Use `'__all__'`** ou liste explicitamente os campos
5. **ValidaÃ§Ãµes customizadas**: MÃ©todo `validate_[field]` ou `validate`

### PadrÃµes de ViewSets

1. **Arquivo separado**: `viewsets/[model]_viewsets.py`
2. **Base**: Use `NovadataModelViewSet` (do novadata_utils) ou `ModelViewSet`
3. **Sempre configure**:
   ```python
   queryset = Model.objects.all()
   serializer_class = ModelSerializer
   permission_classes = [IsAuthenticated]  # ou [AllowAny] para pÃºblico
   http_method_names = ["get", "post", "put", "patch", "delete"]
   ```
4. **Filtros**: Use `DjangoFilterBackend` e `filters.SearchFilter`
5. **Actions customizadas**: Use `@action` decorator
6. **Registre no `urls.py`** com router

### Novos Apps Django

Ao criar um novo app:

```bash
python manage.py startapp app_name
```

Depois:
1. Crie a estrutura de pastas (admin/, models/, serializers/, viewsets/)
2. Mova arquivos default para subpastas corretas
3. Configure `__init__.py` em cada subpasta para exports
4. Adicione em `INSTALLED_APPS` no settings
5. Configure URLs no app e no conecta/urls.py

---

## ğŸ” AutenticaÃ§Ã£o e PermissÃµes

### Frontend
- Token jÃ¡ configurado no middleware `server/middleware/api-proxy.js`
- Todas chamadas `/api/*` recebem header `Authorization: Token {API_SECRET}`

### Backend
- **APIs pÃºblicas** (vagas, Ã¡reas de atuaÃ§Ã£o): `permission_classes = [AllowAny]`
- **APIs privadas**: `permission_classes = [IsAuthenticated]`
- **Custom permissions**: Crie em `permissions.py` no app

---

## ğŸ“ ConvenÃ§Ãµes de Nomenclatura

### Frontend
- **Componentes**: PascalCase (`VagaCard.vue`, `UiButton.vue`)
- **Composables**: camelCase com prefixo `use` (`useShowError.js`)
- **Services**: camelCase com sufixo `Service` (`vagasService.js`)
- **Utils**: camelCase (`editorJS.ts`, `utils.js`)

### Backend
- **Models**: PascalCase (`Vaga`, `Candidato`)
- **Arquivos**: snake_case (`vaga_admin.py`, `candidato_serializers.py`)
- **VariÃ¡veis/funÃ§Ãµes**: snake_case (`get_vagas`, `usuario_criacao`)

---

## ğŸš« O QUE NÃƒO FAZER

### Frontend
- âŒ Criar botÃµes/inputs customizados sem usar Design System
- âŒ Hardcodar valores que deveriam ser props
- âŒ Duplicar lÃ³gica que poderia ser composable
- âŒ Estilos inline ou CSS scoped sem necessidade
- âŒ Ignorar componentes Quasar existentes

### Backend
- âŒ Models fora da pasta `models/`
- âŒ Admin sem `list_display` ou `search_fields`
- âŒ ViewSets sem `permission_classes` definido
- âŒ Criar apps sem seguir estrutura de pastas padrÃ£o
- âŒ Campos sem `verbose_name`
- âŒ Commits diretos sem migrations

---

## ğŸ§ª Testes

### Frontend
- Testes em `*.spec.js` ou `*.test.js`
- Use Vitest para unit tests

### Backend
- Testes em `tests/` dentro de cada app
- Use `TestCase` do Django
- Organize em: `models/`, `admin/`, `viewsets/`, etc.

---

## ğŸ“š ReferÃªncias

- **Frontend**: Consulte componentes existentes em `frontend/app/components/`
- **Backend**: Veja apps existentes (`home/`, `recrutamento/`) como referÃªncia
- **Proxy API**: `frontend/server/middleware/api-proxy.js`
- **Scripts**: `scripts/README.md`

---

## âš¡ Workflow Recomendado

1. **Antes de criar algo novo**: Verifique se jÃ¡ existe
2. **Frontend**: Comece pelos componentes, depois lÃ³gica
3. **Backend**: Model â†’ Admin â†’ Serializer â†’ ViewSet â†’ URLs
4. **Sempre teste** localmente antes de commitar
5. **Documente** decisÃµes arquiteturais importantes

---

**IMPORTANTE**: Estas regras garantem consistÃªncia e manutenibilidade. Siga-as rigorosamente.
